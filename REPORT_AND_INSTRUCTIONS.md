# تقرير تسليم مشروع موقع المجتمع (Truvails Community)

مرحباً،

يسعدني أن أقدم لك ملفات مشروع موقع المجتمع الذي طلبته. لقد تم تطوير الموقع باستخدام Next.js و Firebase، مع التركيز على توفير تصميم عصري وميزات متقدمة حسب متطلباتك.

## محتويات التسليم:

1.  **مجلد `community-app` (مرفق كملف مضغوط `community_app_project.zip`):** يحتوي هذا المجلد على كامل كود المصدر للمشروع.
2.  **مجلد `community-app/out`:** يحتوي هذا المجلد على **الملفات الثابتة** التي تم تصديرها من المشروع. هذه هي الملفات التي يمكنك رفعها مباشرة إلى أي استضافة تدعم الملفات الثابتة (HTML, CSS, JavaScript).
3.  **ملف `Truvails.json` (الذي أرفقته سابقاً):** هذا الملف يحتوي على إعدادات Firebase الخاصة بك. تم استخدام هذا الملف لتكوين الاتصال بـ Firebase داخل الكود البرمجي (في ملف `community-app/src/lib/firebase.ts`).
4.  **ملف `firestore.rules`:** يحتوي على قواعد الأمان المقترحة لـ Firestore.
5.  **ملف `storage.rules`:** يحتوي على قواعد الأمان المقترحة لـ Firebase Storage.

## ملاحظات هامة حول النشر والصفحات الديناميكية:

لقد طلبت أن يكون الموقع سهل النشر بدون الحاجة لأوامر معقدة. لهذا السبب، تم التركيز على **تصدير الصفحات الثابتة (Static Export)** من Next.js. هذا يعني أن الصفحات التي لا تعتمد على جلب بيانات متغيرة بشكل كبير لكل مستخدم أو لكل طلب (Server-Side Rendering - SSR) تم تحويلها إلى ملفات HTML ثابتة.

**الصفحات التي تم تصديرها كملفات ثابتة (موجودة في مجلد `out`):**

*   الصفحة الرئيسية (`/`)
*   صفحات المصادقة (تسجيل الدخول `/auth/login`، إنشاء حساب `/auth/signup`)
*   صفحة الإعدادات (`/settings`)
*   صفحة البحث (`/search`) (تعمل كصفحة ثابتة حالياً، البحث الفعلي يتطلب منطقاً ديناميكياً)
*   صفحة المواضيع الرائجة (`/trending`) (تعمل كصفحة ثابتة حالياً، عرض المواضيع الرائجة يتطلب منطقاً ديناميكياً)

**قيود التصدير الثابت والصفحات الديناميكية:**

بسبب طبيعة التصدير الثابت، الصفحات التي تعتمد بشكل كبير على بيانات ديناميكية فريدة لكل طلب (مثل عرض منشور معين أو ملف شخصي لمستخدم معين) لا يمكن تصديرها كملفات HTML ثابتة بسيطة بنفس الطريقة.

**الصفحات التالية هي صفحات ديناميكية وتتطلب تعاملاً خاصاً عند النشر إذا أردت دعمها بالكامل:**

*   **صفحة عرض المنشور المفرد (`/post/[postId]`):** هذه الصفحة مصممة لجلب بيانات المنشور من Firestore بناءً على `postId`.
*   **صفحة عرض الملف الشخصي للمستخدم (`/profile/[userId]`):** هذه الصفحة مصممة لجلب بيانات المستخدم من Firestore بناءً على `userId`.

**كيفية التعامل مع الصفحات الديناميكية:**

1.  **النشر على Firebase Hosting (الحل الموصى به):**
    *   Firebase Hosting يتكامل بشكل ممتاز مع تطبيقات Next.js ويدعم تطبيقات الويب الحديثة التي تحتوي على صفحات ثابتة وديناميكية.
    *   يمكنك نشر مجلد `out` كملفات ثابتة، ثم استخدام Firebase Hosting rewrites لتوجيه الطلبات للصفحات الديناميكية (مثل `/post/*` و `/profile/*`) إلى دالة Cloud Function (أو Cloud Run) تقوم بتشغيل تطبيق Next.js في وضع SSR أو ISR (Incremental Static Regeneration) لخدمة هذه الصفحات.
    *   هذا يتطلب إعداداً إضافياً في Firebase وقد يتطلب تعديل بنية المشروع ليدعم هذا النوع من النشر بشكل كامل (حالياً المشروع مهيأ لـ `output: 'export'`).
2.  **استخدام استضافة تدعم تطبيقات Node.js/Next.js (مثل Vercel, Netlify, أو خادم خاص):**
    *   هذه المنصات مصممة لتشغيل تطبيقات Next.js بالكامل، بما في ذلك الصفحات الديناميكية و SSR.
    *   في هذه الحالة، لن تستخدم مجلد `out` مباشرة، بل ستقوم بنشر كود المصدر كاملاً (`community-app`) وستقوم المنصة بعملية الـ build والـ deployment.
3.  **الاكتفاء بالصفحات الثابتة حالياً:**
    *   يمكنك نشر مجلد `out` كما هو. الصفحات الديناميكية (`/post/[id]` و `/profile/[id]`) لن تعمل بشكل صحيح إذا تم الوصول إليها مباشرة عبر URL، لكن التنقل إليها من داخل التطبيق (بعد تحميل الصفحة الرئيسية) قد يعمل جزئياً لأنها ستُحمّل كـ Single Page Application (SPA) وتجلب البيانات من جهة العميل.

## خطوات النشر الأساسية (للجزء الثابت على استضافة بسيطة):

1.  **إعداد Firebase:**
    *   تأكد من أن مشروع Firebase الخاص بك (الذي تم استخراج الإعدادات منه في `Truvails.json`) مُفعل وجاهز.
    *   قم بتطبيق قواعد الأمان الموجودة في ملفي `firestore.rules` و `storage.rules` على مشروع Firebase الخاص بك من خلال لوحة تحكم Firebase.
        *   لـ Firestore: اذهب إلى Firestore Database -> Rules -> انسخ والصق محتوى `firestore.rules`.
        *   لـ Storage: اذهب إلى Storage -> Rules -> انسخ والصق محتوى `storage.rules`.
    *   تأكد من تفعيل طرق المصادقة التي تريدها (Google Sign-In, Email/Password) في قسم Authentication في لوحة تحكم Firebase.
2.  **رفع الملفات الثابتة:**
    *   قم برفع **محتويات** مجلد `community-app/out` إلى جذر موقعك على استضافتك التي تدعم الملفات الثابتة.
    *   تأكد من أن ملف `index.html` هو الملف الافتراضي الذي يتم تحميله عند زيارة نطاقك.

## ملاحظات إضافية حول الكود:

*   **جودة الكود:** أثناء عملية البناء، ظهرت بعض التحذيرات المتعلقة بجودة الكود (ESLint warnings) مثل متغيرات غير مستخدمة أو استخدام النوع `any` في TypeScript. تم تجاهل هذه التحذيرات لإكمال عملية البناء والتصدير الثابت حسب طلبك للسرعة. يمكنك مراجعتها وتحسينها لاحقاً إذا أردت.
*   **الصور:** تم استخدام وسوم `<img>` القياسية. لتحسين الأداء، يمكنك استبدالها بمكون `next/image` إذا كانت استضافتك تدعم تحسين الصور أو إذا قمت بإعداد مُحمِّل صور مخصص.
*   **ميزات إضافية مقترحة (في `todo.md`):** تم تضمين قائمة ببعض الميزات الإضافية التي يمكن تطويرها لتعزيز الموقع بشكل أكبر في المستقبل.

## الصفحات الديناميكية (الموجودة في الكود ولكن غير مصدرة كملفات ثابتة):

للتوضيح، الكود الخاص بصفحات `/post/[postId]` و `/profile/[userId]` موجود بالكامل في مجلد `community-app/src/app/`. إذا اخترت استضافة تدعم تطبيقات Next.js بشكل كامل (مثل Vercel أو Firebase Hosting مع Cloud Functions)، يمكنك نشر المشروع كاملاً لتفعيل هذه الصفحات.

أتمنى أن يكون هذا التسليم شاملاً وواضحاً. إذا كان لديك أي أسئلة أخرى أو احتجت إلى مساعدة إضافية، فلا تتردد في طرحها.

شكراً لك.
